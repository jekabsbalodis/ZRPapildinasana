{% extends "base.html" %}
{% from 'bootstrap5/form.html' import render_form %}


{% block title %}<title>ZRApp - Meklēt medikamentus pievienošanai</title>{% endblock %}

{% block head %}
{{ super() }}
<style>
    .spinner-wrapper {
        position: fixed;
        width: 100%;
        height: 100%;
        z-index: 1000;
        top: 40%;
        left: 0px;
        opacity: 0;
        display: none;
        transition: all 0.2;
    }
</style>
{% endblock %}

{% block page_content %}

<div class="whole-page">
    <h1 class="display-1">Meklēt medikamentus pievienošanai</h1>
    <hr>
    <div class="row row-cols-1 row-cols-lg-3 g-4">
        <div class="col">{{ render_form(form_atc, render_kw={'onsubmit': 'return loading()'}) }}</div>
        <div class="col">{{ render_form(form_name, render_kw={'onsubmit': 'return loading()'}) }}</div>
        <div class="col">{{ render_form(form_reg, render_kw={'onsubmit': 'return loading()'}) }}</div>
    </div>
    <div class="spinner-wrapper">
        <div class="d-flex justify-content-center">
            <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script type="text/javascript">
    const spinnerWrapperEl = document.querySelector('.spinner-wrapper');
    const wholePageEl = document.querySelector('.whole-page')
    function loading() {
        spinnerWrapperEl.style.opacity = '1';
        spinnerWrapperEl.style.display = 'unset';
        wholePageEl.style.opacity = '0.5'
        // TODO: Make background of page unclickable
        // wholePageEl.hasPointerCapture = false
    }    
</script>
{% endblock %}